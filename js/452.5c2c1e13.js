"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[452],{7452:function(e,t,s){s.r(t),s.d(t,{default:function(){return it}});var o=s(6252),l=s(3577),a=s(9963);const n=(0,o._)("i",{class:"bi bi-currency-dollar"},null,-1),r=[n],i={key:0,class:"cartIsNull"},c=(0,o._)("h2",{class:"position-absolute top-50 start-50 translate-middle text-white"},"尚未有商品請去新增",-1),d={key:1,class:"container"},p=(0,o.uE)('<ul class="list-unstyled row align-items-center justify-content-center mt-3 mb-5"><li class="col-2 cart-step"><span>step1</span></li><li class="col-2 cart-step-line not-yet-step-line"></li><li class="col-2 cart-step not-yet-step"><span>step2</span></li><li class="col-2 cart-step-line not-yet-step-line"></li><li class="col-2 cart-step not-yet-step"><span>step3</span></li></ul>',1),u={class:"d-lg-none"},_={class:"list-unstyled"},b={class:"row w-100 h-100 position-relative"},f={class:"col-5 col-md-4 h-100 pe-0"},y=["src","alt"],h={class:"col-6 col-md-7"},g={class:"d-md-flex mb-md-2"},w={class:"mb-1"},m={class:"text-secondary border px-1 me-2"},x={class:"mb-1"},v={class:"mb-2"},C={key:0,class:"me-2 text-decoration-line-through text-secondary"},$={class:"quantity-group"},k=["onClick"],z=["onChange","onUpdate:modelValue"],N=["onClick"],T={class:"col-1 position-absolute top-50 end-0 translate-middle-y text-end"},P=["onClick"],j={class:"pt-3 box-shadow-top"},q={class:"d-flex align-items-center justify-content-between ps-3"},D=(0,o._)("p",{class:"mb-0"},[(0,o._)("i",{class:"bi bi-ticket-perforated me-2 fs-5 text-danger"}),(0,o._)("span",null,"優惠卷")],-1),I={class:"text-danger lh-40 px-3",style:{"font-size":"14px"}},L={class:"d-flex justify-content-end border-top align-items-center"},O={class:"me-2"},U=(0,o._)("span",{class:"me-2",style:{"font-size":"14px"}},"總金額",-1),M={class:"text-danger fw-bold"},V={key:0},Z=(0,o._)("span",{class:"text-secondary me-2",style:{"font-size":"14px"}},"已省下",-1),B={class:"text-danger",style:{"font-size":"14px"}},G={class:"d-none d-lg-flex row justify-content-between"},W=(0,o.uE)('<ul class="list-unstyled d-flex col-7 border-bottom border-3 pb-2 fw-bold"><li class="col-5">商品</li><li class="col-2">單價</li><li class="col-2">數量</li><li class="col-3">總計</li></ul>',1),Y={class:"list-unstyled col-7 overflow-scroll cart-product g-0"},E={class:"col-5 h-100 p-0"},F=["src"],H={class:"col-2 lh-90"},K={class:"col-2 position-relative"},A={class:"quantity-group position-absolute top-50 translate-middle-y"},J=["onClick"],Q=["onChange","onUpdate:modelValue"],R=["onClick"],S={class:"col-3 d-flex justify-content-between lh-90"},X=["onClick"],ee={class:"col-4"},te={class:"card mb-3"},se={class:"card-body"},oe={class:"cart-coupons-group"},le={class:"pt-3 pb-5 lh-40"},ae={class:"d-flex justify-content-between"},ne=(0,o._)("span",{class:""},"小計",-1),re={class:"d-flex justify-content-between"},ie=(0,o._)("span",{class:""},"優惠折抵",-1),ce={class:"d-flex justify-content-between"},de=(0,o._)("span",{class:""},[(0,o.Uk)("運費 "),(0,o._)("span",{class:"text-secondary",style:{"font-size":"12px"}},"(滿NT$5,000免運)")],-1),pe={class:"text-danger lh-40",style:{"font-size":"14px"}},ue={class:"d-flex justify-content-between border-top lh-40"},_e=(0,o._)("span",{class:""},"總金額",-1),be={class:"fw-bold"};function fe(e,t,s,n,fe,ye){const he=(0,o.up)("LoadingView"),ge=(0,o.up)("router-link"),we=(0,o.up)("final-cart-price"),me=(0,o.up)("cart-price");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(he,{active:fe.isLoading},null,8,["active"]),(0,o._)("button",{class:(0,l.C_)(["scrollPrice icon-btn z-index fs-5",{"d-none":fe.scrollPrice}]),onClick:t[0]||(t[0]=e=>this.$refs.showFinalCartPrice.showModal())},r,2),0===fe.cartLength?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(ge,{to:"/products/全部商品"},{default:(0,o.w5)((()=>[c])),_:1})])):((0,o.wg)(),(0,o.iD)("div",d,[p,(0,o._)("div",u,[(0,o._)("ul",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(fe.orders.carts,((t,s)=>((0,o.wg)(),(0,o.iD)("li",{class:"border rounded-2 mb-3 p-3",key:`order${s}`,style:{height:"170px"}},[(0,o._)("div",b,[(0,o._)("div",f,[(0,o._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"w-100 h-100"},null,8,y)]),(0,o._)("div",h,[(0,o._)("div",g,[(0,o._)("p",w,[(0,o._)("span",m,(0,l.zw)(t.product.category),1)]),(0,o._)("p",x,(0,l.zw)(t.product.title),1)]),(0,o._)("div",v,[t.product.origin_price!=t.product.price?((0,o.wg)(),(0,o.iD)("small",C,"$ "+(0,l.zw)(e.$filters.currency(t.product.origin_price)),1)):(0,o.kq)("",!0),(0,o._)("span",{class:(0,l.C_)({"text-danger":t.product.origin_price!=t.product.price})},"$ "+(0,l.zw)(e.$filters.currency(t.product.price)),3)]),(0,o._)("div",$,[(0,o._)("input",{type:"button",value:"-",ref_for:!0,ref:"btn",onClick:e=>ye.updateOrder(t.id,t.qty-1)},null,8,k),(0,o.wy)((0,o._)("input",{type:"number",min:"1",ref_for:!0,ref:"number",onChange:e=>ye.updateOrder(t.id,t.qty),"onUpdate:modelValue":e=>t.qty=e},null,40,z),[[a.nr,t.qty]]),(0,o._)("input",{type:"button",value:"+",ref_for:!0,ref:"btn",onClick:e=>ye.updateOrder(t.id,t.qty+1)},null,8,N)])]),(0,o._)("div",T,[(0,o._)("i",{class:"bi bi-trash pointer",onClick:e=>ye.deleteOrder(t.id)},null,8,P)])])])))),128))]),(0,o._)("div",{class:(0,l.C_)(["position-fixed bottom-0 w-100 start-0 bg-white z-index",{"d-none":!fe.scrollPrice}])},[(0,o._)("div",j,[(0,o._)("div",q,[D,(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center",{"w-75":fe.couponInput}])},[fe.orders.final_total!=fe.orders.total?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["text-success border border-success px-2",{"d-none":fe.couponInput}])},"已套用優惠卷",2)):(0,o.kq)("",!0),fe.couponInput?((0,o.wg)(),(0,o.iD)("i",{key:2,class:"bi bi-chevron-left px-3 pointer",onClick:t[2]||(t[2]=e=>fe.couponInput=!1)})):((0,o.wg)(),(0,o.iD)("i",{key:1,class:"bi bi-chevron-right px-3 pointer",onClick:t[1]||(t[1]=e=>fe.couponInput=!0)})),(0,o._)("div",{class:(0,l.C_)(["cart-coupons-group w-100 pe-3",{"d-none":!fe.couponInput}])},[(0,o.wy)((0,o._)("input",{type:"text",class:"border-1",placeholder:"優惠卷代碼","onUpdate:modelValue":t[3]||(t[3]=e=>fe.couponCode=e)},null,512),[[a.nr,fe.couponCode]]),(0,o._)("input",{type:"button",class:"bg-secondary border-1 transition-03sec",value:"確認",onClick:t[4]||(t[4]=e=>(ye.addCoupon(fe.couponCode,"small"),fe.couponInput=!1))})],2)],2)]),(0,o._)("span",I,(0,l.zw)(fe.orders.total>=5e3?"商品滿 NT$ 5,000 免運 ♡ ♡ ♡":`還差 NT$ ${5e3-fe.orders.total} 就享有免運！`),1),(0,o._)("div",L,[(0,o._)("div",O,[(0,o._)("div",null,[U,(0,o._)("span",M,"NT$ "+(0,l.zw)(fe.orders.total>=5e3?e.$filters.currency(fe.orders.final_total):e.$filters.currency(fe.orders.final_total+100)),1)]),fe.orders.total!=fe.orders.final_total?((0,o.wg)(),(0,o.iD)("div",V,[Z,(0,o._)("span",B,"NT$ "+(0,l.zw)(e.$filters.currency(fe.orders.total-fe.orders.final_total)),1),(0,o._)("i",{class:"bi bi-chevron-up pointer px-2",onClick:t[5]||(t[5]=e=>this.$refs.showCartPrice.showModal())})])):(0,o.kq)("",!0)]),(0,o._)("button",{class:"btn btn-danger p-3 text-white rounded-0",onClick:t[6]||(t[6]=(...e)=>ye.goPay&&ye.goPay(...e))},"立即結帳")])])],2)]),(0,o._)("div",G,[W,(0,o._)("ul",Y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(fe.orders.carts,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"row mb-3 g-0",style:{height:"90px"},key:t.id},[(0,o._)("div",E,[(0,o._)("img",{src:t.product.imageUrl,alt:"order.product.title",class:"w-30 me-3 h-100"},null,8,F),(0,o._)("span",null,(0,l.zw)(t.product.title),1)]),(0,o._)("div",H," NT$ "+(0,l.zw)(e.$filters.currency(t.product.price)),1),(0,o._)("div",K,[(0,o._)("div",A,[(0,o._)("input",{type:"button",value:"-",ref_for:!0,ref:"btn",onClick:e=>ye.updateOrder(t.id,t.qty-1)},null,8,J),(0,o.wy)((0,o._)("input",{type:"number",min:"1",ref_for:!0,ref:"number",onChange:e=>ye.updateOrder(t.id,t.qty),"onUpdate:modelValue":e=>t.qty=e},null,40,Q),[[a.nr,t.qty]]),(0,o._)("input",{type:"button",value:"+",ref_for:!0,ref:"btn",onClick:e=>ye.updateOrder(t.id,t.qty+1)},null,8,R)])]),(0,o._)("div",S,[(0,o.Uk)(" NT$ "+(0,l.zw)(e.$filters.currency(t.total))+" ",1),(0,o._)("i",{class:"bi bi-trash pointer",onClick:e=>ye.deleteOrder(t.id)},null,8,X)])])))),128))]),(0,o._)("div",ee,[(0,o._)("div",te,[(0,o._)("div",se,[(0,o._)("div",oe,[(0,o.wy)((0,o._)("input",{type:"text",class:"border-1",placeholder:"優惠卷代碼","onUpdate:modelValue":t[7]||(t[7]=e=>fe.couponCode=e)},null,512),[[a.nr,fe.couponCode]]),(0,o._)("input",{type:"button",class:"bg-secondary border-1 transition-03sec",value:"確認",onClick:t[8]||(t[8]=e=>ye.addCoupon(fe.couponCode))})]),(0,o._)("div",le,[(0,o._)("div",ae,[ne,(0,o._)("span",null,"NT$ "+(0,l.zw)(e.$filters.currency(fe.orders.total)),1)]),(0,o._)("div",re,[ie,(0,o._)("span",null,"- NT$ "+(0,l.zw)(Math.round(fe.orders.total-fe.orders.final_total)),1)]),(0,o._)("div",ce,[de,(0,o._)("span",null,"NT$ "+(0,l.zw)(fe.orders.total>=5e3?0:100),1)])]),(0,o._)("span",pe,(0,l.zw)(fe.orders.total>=5e3?"商品滿 NT$ 5,000 免運 ♡ ♡ ♡":`還差 NT$ ${5e3-fe.orders.total} 就享有免運！`),1),(0,o._)("div",ue,[_e,(0,o._)("span",be,"NT$ "+(0,l.zw)(fe.orders.total>=5e3?e.$filters.currency(fe.orders.final_total):e.$filters.currency(fe.orders.final_total+100)),1)]),(0,o._)("button",{class:"btn btn-lg btn-primary w-100 mt-3",onClick:t[9]||(t[9]=(...e)=>ye.goPay&&ye.goPay(...e))},"立即結帳")])])])])])),(0,o.Wm)(we,{ref:"showFinalCartPrice",orders:fe.orders,onGoPay:ye.goPay,onGetCoupon:ye.addCoupon},null,8,["orders","onGoPay","onGetCoupon"]),(0,o.Wm)(me,{ref:"showCartPrice",orders:fe.orders},null,8,["orders"])],64)}const ye={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},he={class:"modal-dialog"},ge={class:"modal-content"},we=(0,o._)("div",{class:"modal-header bg-danger"},[(0,o._)("h5",{class:"modal-title text-white",id:"staticBackdropLabel"},"最終確認"),(0,o._)("input",{type:"button",value:"✕",class:"bg-transparent border-0 text-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),me={class:"modal-body"},xe={class:"px-3 pb-3 lh-40"},ve={class:"d-flex justify-content-between"},Ce=(0,o._)("span",{class:""},"小計",-1),$e={class:"d-flex justify-content-between"},ke=(0,o._)("span",{class:""},"優惠折抵",-1),ze={class:"d-flex justify-content-between"},Ne=(0,o._)("span",{class:""},[(0,o.Uk)("運費 "),(0,o._)("span",{class:"text-secondary",style:{"font-size":"12px"}},"(滿NT$5,000免運)")],-1),Te={class:"d-flex align-items-center justify-content-between ps-3"},Pe=(0,o._)("p",{class:"mb-0"},[(0,o._)("i",{class:"bi bi-ticket-perforated me-2 fs-5 text-danger"}),(0,o._)("span",null,"優惠卷")],-1),je={class:"text-danger lh-40 px-3",style:{"font-size":"14px"}},qe={class:"d-flex justify-content-between justify-content-md-end border-top align-items-center ps-3"},De={class:"me-2"},Ie=(0,o._)("span",{class:"me-2",style:{"font-size":"14px"}},"總金額",-1),Le={class:"text-danger fw-bold"},Oe={key:0},Ue=(0,o._)("span",{class:"text-secondary me-2",style:{"font-size":"14px"}},"已省下",-1),Me={class:"text-danger",style:{"font-size":"14px"}};function Ve(e,t,s,n,r,i){return(0,o.wg)(),(0,o.iD)("div",ye,[(0,o._)("div",he,[(0,o._)("div",ge,[we,(0,o._)("div",me,[(0,o._)("div",xe,[(0,o._)("div",ve,[Ce,(0,o._)("span",null,"NT$ "+(0,l.zw)(e.$filters.currency(s.orders.total)),1)]),(0,o._)("div",$e,[ke,(0,o._)("span",null,"- NT$ "+(0,l.zw)(Math.round(s.orders.total-s.orders.final_total)),1)]),(0,o._)("div",ze,[Ne,(0,o._)("span",null,"NT$ "+(0,l.zw)(s.orders.total>=5e3?0:100),1)])]),(0,o._)("div",Te,[Pe,(0,o._)("div",{class:(0,l.C_)(["d-flex align-items-center",{"w-75":r.couponInput}])},[s.orders.final_total!=s.orders.total?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,l.C_)(["text-success border border-success px-2",{"d-none":r.couponInput}])},"已套用優惠卷",2)):(0,o.kq)("",!0),r.couponInput?((0,o.wg)(),(0,o.iD)("i",{key:2,class:"bi bi-chevron-left px-3 pointer",onClick:t[1]||(t[1]=e=>r.couponInput=!1)})):((0,o.wg)(),(0,o.iD)("i",{key:1,class:"bi bi-chevron-right px-3 pointer",onClick:t[0]||(t[0]=e=>r.couponInput=!0)})),(0,o._)("div",{class:(0,l.C_)(["cart-coupons-group w-100 pe-3",{"d-none":!r.couponInput}])},[(0,o.wy)((0,o._)("input",{type:"text",class:"border-1",placeholder:"優惠卷代碼","onUpdate:modelValue":t[2]||(t[2]=e=>r.couponCode=e)},null,512),[[a.nr,r.couponCode]]),(0,o._)("input",{type:"button",class:"bg-secondary border-1 transition-03sec",value:"確認",onClick:t[3]||(t[3]=t=>(e.$emit("get-coupon",r.couponCode),r.couponInput))})],2)],2)]),(0,o._)("span",je,(0,l.zw)(s.orders.total>=5e3?"商品滿 NT$ 5,000 免運 ♡ ♡ ♡":`還差 NT$ ${5e3-s.orders.total} 就享有免運！`),1),(0,o._)("div",qe,[(0,o._)("div",De,[(0,o._)("div",null,[Ie,(0,o._)("span",Le,"NT$ "+(0,l.zw)(s.orders.total>=5e3?e.$filters.currency(s.orders.final_total):e.$filters.currency(s.orders.final_total+100)),1)]),s.orders.total!=s.orders.final_total?((0,o.wg)(),(0,o.iD)("div",Oe,[Ue,(0,o._)("span",Me,"NT$ "+(0,l.zw)(e.$filters.currency(s.orders.total-s.orders.final_total)),1)])):(0,o.kq)("",!0)]),(0,o._)("button",{class:"btn btn-danger p-3 text-white rounded-0",onClick:t[4]||(t[4]=t=>e.$emit("go-pay"))},"立即結帳")])])])])],512)}var Ze=s(7995),Be={props:{orders:{}},data(){return{modal:{},couponInput:!1,couponCode:""}},emits:["go-pay","get-coupon"],mixins:[Ze.Z]},Ge=s(3744);const We=(0,Ge.Z)(Be,[["render",Ve]]);var Ye=We;const Ee={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Fe={class:"modal-dialog"},He={class:"modal-content"},Ke=(0,o._)("div",{class:"modal-header bg-primary"},[(0,o._)("h5",{class:"modal-title text-white",id:"staticBackdropLabel"},"折扣優惠碼試算"),(0,o._)("input",{type:"button",value:"✕",class:"bg-transparent border-0 text-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ae={class:"modal-body"},Je={class:"px-3 pb-3 lh-40"},Qe={class:"d-flex justify-content-between"},Re=(0,o._)("span",{class:""},"小計",-1),Se={class:"d-flex justify-content-between"},Xe=(0,o._)("span",{class:""},"優惠折抵",-1),et={class:"d-flex justify-content-between"},tt=(0,o._)("span",{class:""},[(0,o.Uk)("運費 "),(0,o._)("span",{class:"text-secondary",style:{"font-size":"12px"}},"(滿NT$5,000免運)")],-1);function st(e,t,s,a,n,r){return(0,o.wg)(),(0,o.iD)("div",Ee,[(0,o._)("div",Fe,[(0,o._)("div",He,[Ke,(0,o._)("div",Ae,[(0,o._)("div",Je,[(0,o._)("div",Qe,[Re,(0,o._)("span",null,"NT$ "+(0,l.zw)(e.$filters.currency(s.orders.total)),1)]),(0,o._)("div",Se,[Xe,(0,o._)("span",null,"- NT$ "+(0,l.zw)(Math.round(s.orders.total-s.orders.final_total)),1)]),(0,o._)("div",et,[tt,(0,o._)("span",null,"NT$ "+(0,l.zw)(s.orders.total>=5e3?0:100),1)])])])])])],512)}var ot={props:{orders:{}},data(){return{modal:{}}},mixins:[Ze.Z]};const lt=(0,Ge.Z)(ot,[["render",st]]);var at=lt,nt={components:{finalCartPrice:Ye,cartPrice:at},data(){return{isLoading:!1,scrollPrice:!0,orders:[],cartLength:0,couponCode:"",couponInput:!1}},inject:["emitter"],methods:{scroll(){window.scrollY>=334?this.scrollPrice=!1:this.scrollPrice=!0},getOrders(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/irenelee-api/cart";this.$http.get(e).then((e=>{e.data.success&&(this.isLoading=!1,this.orders=e.data.data,this.cartLength=e.data.data.carts.length,window.scrollTo(0,0))})).catch((e=>console.log(e.response)))},deleteOrder(e){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/irenelee-api/cart/${e}`;console.log(t),this.$http.delete(t).then((()=>{this.isLoading=!1,this.getOrders(),this.$message("success","刪除成功")})).catch((e=>console.log(e.response)))},updateOrder(e,t){const s=`https://vue3-course-api.hexschool.io/api/irenelee-api/cart/${e}`,o={product_id:e,qty:t>1?t:1};0===t?this.$message("danger","商品不得少於一樣"):(this.isLoading=!0,this.$http.put(s,{data:o}).then((()=>{this.isLoading=!1,this.getOrders(),this.$message("success","更新成功")})).catch((e=>console.log(e.response))))},addCoupon(e,t){const s="https://vue3-course-api.hexschool.io/api/irenelee-api/coupon",o={code:e};this.$http.post(s,{data:o}).then((e=>{e.data.success?("small"===t&&(this.couponInput=!1),this.getOrders(),this.$message("success","成功套用優惠卷")):this.$message("danger","優惠代碼有誤")}))},goPay(){this.$refs.showFinalCartPrice.hideModal(),this.$router.push("/cart/check")}},created(){this.getOrders(),window.addEventListener("scroll",this.scroll)}};const rt=(0,Ge.Z)(nt,[["render",fe]]);var it=rt}}]);
//# sourceMappingURL=452.5c2c1e13.js.map