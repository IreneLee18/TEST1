"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[258],{2816:function(t,e,i){i.d(e,{Z:function(){return f}});var s=i(6252),a=i(3577),r=i(9963);const c={class:"pagination justify-content-center"},n=(0,s._)("span",{"aria-hidden":"true"},"⇠",-1),o=[n],l=["onClick"],p=(0,s._)("span",{"aria-hidden":"true"},"⇢",-1),d=[p];function g(t,e,i,n,p,g){return(0,s.wg)(),(0,s.iD)("ul",c,[(0,s._)("li",{class:(0,a.C_)(["page-item fs-3",{"d-none":!i.pages.has_pre}])},[(0,s._)("a",{class:"pages-next-link",href:"#",onClick:e[0]||(e[0]=(0,r.iM)((t=>g.updatedPage(i.pages.current_page-1)),["prevent"]))},o)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,a.C_)(["page-item fs-3",{active:i.pages.current_page===t}]),key:t},[(0,s._)("a",{class:"pages-link",href:"#",onClick:(0,r.iM)((e=>g.updatedPage(t)),["prevent"])},(0,a.zw)(t),9,l)],2)))),128)),(0,s._)("li",{class:(0,a.C_)(["page-item fs-3",{"d-none":!i.pages.has_next}])},[(0,s._)("a",{class:"pages-next-link",href:"#",onClick:e[1]||(e[1]=(0,r.iM)((t=>g.updatedPage(i.pages.current_page+1)),["prevent"]))},d)],2)])}var u={props:["pages"],methods:{updatedPage(t){this.$emit("change-page",t)}}},h=i(3744);const _=(0,h.Z)(u,[["render",g]]);var f=_},6258:function(t,e,i){i.r(e),i.d(e,{default:function(){return U}});var s=i(6252),a=i(3577),r=i(9963);const c={class:"userProduct-bg pb-10"},n={class:"container"},o={class:"list-unstyled d-flex align-items-center pt-4 pb-2"},l=(0,s._)("p",{class:"fs-6 mb-0 text-center text-md-start"},"首頁",-1),p=(0,s._)("li",null,[(0,s._)("p",{class:"mb-0 mx-2"},">")],-1),d=(0,s._)("p",{class:"fs-6 mb-0"},"全部商品",-1),g={key:0},u=(0,s._)("p",{class:"mb-0 mx-2"},">",-1),h=[u],_={key:1},f={class:"fs-6 mb-0 fw-normal"},m={class:"py-2 px-5 rounded-2",style:{background:"rgba(255,255,255,.9)"}},w={class:"d-flex justify-content-end align-items-center mb-3"},y={class:"sortPrcie position-relative text-center"},k=(0,s._)("i",{class:"bi bi-arrow-down-up fs-4 me-2"},null,-1),b=(0,s._)("span",{class:"text-primary"},"排序",-1),v={class:"sortPrcie-btnGroup bg-white border rounded-2 position-absolute start-50 translate-middle-x",style:{width:"232%"}},P={class:"list-unstyled py-2 px-4 lh-lg text-center"},x={key:0,class:"position-relative pb-7"},C=(0,s._)("h2",{class:"not-found-category"},"不存在該商品類別唷！",-1),D=[C],$={class:"row list-unstyled"},I={class:"box-shadow h-100 rounded-3 overflow-hidden"},L=["onClick"],S=(0,s._)("p",{class:"introduce position-absolute w-100 h-100 text-center"},"詳細介紹",-1),q={key:0,class:"onsale"},z={class:"category"},H=(0,s._)("i",{class:"bi bi-tag"},null,-1),M=["src","alt"],O={class:"bg-white p-3"},N={class:"mb-2"},T={key:0,class:"me-2"},W=["data-id","onClick"],Z=["data-id","onClick"];function j(t,e,i,u,C,j){const E=(0,s.up)("LoadingView"),J=(0,s.up)("router-link"),Y=(0,s.up)("pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(E,{active:C.isLoading},null,8,["active"]),(0,s._)("div",c,[(0,s._)("div",n,[(0,s._)("ul",o,[(0,s._)("li",null,[(0,s.Wm)(J,{to:"/",class:"text-primary"},{default:(0,s.w5)((()=>[l])),_:1})]),p,(0,s._)("li",null,[(0,s.Wm)(J,{to:"/products/全部商品",class:"text-primary"},{default:(0,s.w5)((()=>[d])),_:1})]),"全部商品"!==C.category?((0,s.wg)(),(0,s.iD)("li",g,h)):(0,s.kq)("",!0),"全部商品"!==C.category?((0,s.wg)(),(0,s.iD)("li",_,[(0,s._)("h1",f,(0,a.zw)(C.category),1)])):(0,s.kq)("",!0)]),(0,s._)("div",m,[(0,s._)("div",w,[(0,s._)("div",y,[k,b,(0,s._)("div",v,[(0,s._)("ul",P,[(0,s._)("li",null,[(0,s._)("a",{href:"",onClick:e[0]||(e[0]=(0,r.iM)((t=>j.sortPrice("down")),["prevent"])),class:(0,a.C_)({selectPrice:!C.price.down})},"$ 由高到低 ",2)]),(0,s._)("li",null,[(0,s._)("a",{href:"",onClick:e[1]||(e[1]=(0,r.iM)((t=>j.sortPrice("up")),["prevent"])),class:(0,a.C_)({selectPrice:!C.price.up})},"$ 由低到高 ",2)])])])])]),0===C.pageData.length?((0,s.wg)(),(0,s.iD)("div",x,D)):(0,s.kq)("",!0),(0,s._)("ul",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(C.pageData,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"col-12 col-md-6 col-xl-3 mb-4 h-100",key:e.id},[(0,s._)("div",I,[(0,s._)("div",{class:"productTop position-relative",style:{height:"235px"},onClick:t=>j.introduce(e)},[S,e.origin_price!==e.price?((0,s.wg)(),(0,s.iD)("div",q,"SALE")):(0,s.kq)("",!0),(0,s._)("div",z,[H,(0,s.Uk)(" "+(0,a.zw)(e.category),1)]),(0,s._)("img",{class:"w-100 h-100",src:e.imageUrl,alt:e.title},null,8,M)],8,L),(0,s._)("div",O,[(0,s._)("p",N,(0,a.zw)(e.title),1),(0,s._)("div",null,[e.origin_price!==e.price?((0,s.wg)(),(0,s.iD)("span",T,"NT$"+(0,a.zw)(t.$filters.currency(e.price)),1)):(0,s.kq)("",!0),(0,s._)("span",{class:(0,a.C_)(["",{"text-secondary":e.origin_price!==e.price,"text-decoration-line-through":e.origin_price!==e.price}])},"NT$"+(0,a.zw)(t.$filters.currency(e.origin_price)),3)]),(0,s._)("div",null,[(0,s._)("i",{class:(0,a.C_)(["pointer",{"bi bi-heart-fill":-1!==C.status.heartID.indexOf(e.id),"bi bi-heart":-1===C.status.heartID.indexOf(e.id)}]),"data-id":e.id,onClick:t=>j.like(e)},null,10,W),(0,s._)("i",{class:"bi bi-cart ps-3 pointer","data-id":e.id,onClick:t=>j.addProduct(e.id)},null,8,Z)])])])])))),128))]),(0,s.Wm)(Y,{pages:C.pagination,onChangePage:j.getPagination},null,8,["pages","onChangePage"])])])])],64)}var E=i(2816),J={components:{pagination:E.Z},data(){return{isLoading:!1,price:{down:!0,up:!0},products:[],category:"全部商品",pageData:[],perPage:8,pagination:{current_page:0,total_pages:0,has_next:!1,has_pre:!1},status:{heartID:[],heart:[]}}},inject:["emitter"],methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/irenelee-api/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.isLoading=!1,this.products=t.data.products,this.getPagination(1),window.scrollTo(0,0))})).catch((t=>console.log(t)))},getPagination(t){const e=this.pagination;e.current_page=t,e.total_pages=Math.ceil(this.filterProduct.length/this.perPage),this.pageData=[],window.scrollTo(0,0),e.current_page>e.total_pages&&(e.current_page=e.total_pages),e.current_page<1&&(e.current_page=1),e.has_pre=e.current_page>1,e.has_next=e.current_page<e.total_pages;const i=e.current_page*this.perPage-this.perPage+1,s=e.current_page*this.perPage;this.filterProduct.forEach(((t,e)=>{const a=e+1;a>=i&&a<=s&&this.pageData.push(t)}))},like(t){const e=t.id,i=this.status.heart,s=i.some((t=>t.id===e));if(s){const t=i.find((t=>t.id===e));i.splice(i.indexOf(t),1),localStorage.setItem("heart",JSON.stringify(i)),this.$message("danger","已刪除我的最愛")}else i.push(t),localStorage.setItem("heart",JSON.stringify(i)),this.$message("success","已加入我的最愛");this.getHeart()},getHeart(){this.status.heart=JSON.parse(localStorage.getItem("heart"))||[],this.status.heartID=[],this.status.heart.forEach((t=>{this.status.heartID.push(t.id)})),this.emitter.emit("add-heart",this.status.heart)},addProduct(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/irenelee-api/cart",i={product_id:t,qty:1};this.$http.post(e,{data:i}).then((t=>{this.isLoading=!1,this.$message("success",t.data.message)}))},introduce(t){this.$router.push(`/product-detail/${t.id}`)},sortPrice(t){"down"===t?(this.filterProduct.sort(((t,e)=>e.price-t.price)),this.price.down=!1,this.price.up=!0):"up"===t&&(this.filterProduct.sort(((t,e)=>t.price-e.price)),this.price.down=!0,this.price.up=!1),this.getPagination(1)}},computed:{filterProduct(){let t=[];switch(this.category){case"全部商品":t=this.products.filter((t=>t));break;case"咖啡豆":t=this.products.filter((t=>"咖啡豆"===t.category));break;case"耳掛包":t=this.products.filter((t=>"耳掛包"===t.category));break;case"咖啡器具":t=this.products.filter((t=>"咖啡器具"===t.category));break;case"杯子":t=this.products.filter((t=>"杯子"===t.category));break}return t}},watch:{$route(){this.category=this.$route.params.category},filterProduct(){this.getPagination(1),this.price.down=!0,this.price.up=!0}},mounted(){this.category=this.$route.params.category,this.getProducts(),this.getHeart()}},Y=i(3744);const K=(0,Y.Z)(J,[["render",j]]);var U=K}}]);
//# sourceMappingURL=258.458e25aa.js.map