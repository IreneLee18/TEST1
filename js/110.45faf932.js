(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[110],{9662:function(t,e,n){var i=n(614),o=n(6330),r=TypeError;t.exports=function(t){if(i(t))return t;throw r(o(t)+" is not a function")}},1223:function(t,e,n){var i=n(5112),o=n(30),r=n(3070).f,a=i("unscopables"),s=Array.prototype;void 0==s[a]&&r(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},9670:function(t,e,n){var i=n(111),o=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw r(o(t)+" is not an object")}},1318:function(t,e,n){var i=n(5656),o=n(1400),r=n(6244),a=function(t){return function(e,n,a){var s,l=i(e),c=r(l),d=o(a,c);if(t&&n!=n){while(c>d)if(s=l[d++],s!=s)return!0}else for(;c>d;d++)if((t||d in l)&&l[d]===n)return t||d||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},4326:function(t,e,n){var i=n(1702),o=i({}.toString),r=i("".slice);t.exports=function(t){return r(o(t),8,-1)}},9920:function(t,e,n){var i=n(2597),o=n(3887),r=n(1236),a=n(3070);t.exports=function(t,e,n){for(var s=o(e),l=a.f,c=r.f,d=0;d<s.length;d++){var u=s[d];i(t,u)||n&&i(n,u)||l(t,u,c(e,u))}}},8880:function(t,e,n){var i=n(9781),o=n(3070),r=n(9114);t.exports=i?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:function(t,e,n){var i=n(614),o=n(8880),r=n(6339),a=n(3072);t.exports=function(t,e,n,s){s||(s={});var l=s.enumerable,c=void 0!==s.name?s.name:e;return i(n)&&r(n,c,s),s.global?l?t[e]=n:a(e,n):(s.unsafe?t[e]&&(l=!0):delete t[e],l?t[e]=n:o(t,e,n)),t}},3072:function(t,e,n){var i=n(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9781:function(t,e,n){var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var i=n(7854),o=n(111),r=i.document,a=o(r)&&o(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},8113:function(t,e,n){var i=n(5005);t.exports=i("navigator","userAgent")||""},7392:function(t,e,n){var i,o,r=n(7854),a=n(8113),s=r.process,l=r.Deno,c=s&&s.versions||l&&l.version,d=c&&c.v8;d&&(i=d.split("."),o=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!o&&a&&(i=a.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/),i&&(o=+i[1]))),t.exports=o},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var i=n(7854),o=n(1236).f,r=n(8880),a=n(8052),s=n(3072),l=n(9920),c=n(4705);t.exports=function(t,e){var n,d,u,p,f,m,h=t.target,b=t.global,g=t.stat;if(d=b?i:g?i[h]||s(h,{}):(i[h]||{}).prototype,d)for(u in e){if(f=e[u],t.dontCallGetSet?(m=o(d,u),p=m&&m.value):p=d[u],n=c(b?u:h+(g?".":"#")+u,t.forced),!n&&void 0!==p){if(typeof f==typeof p)continue;l(f,p)}(t.sham||p&&p.sham)&&r(f,"sham",!0),a(d,u,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var i=n(4374),o=Function.prototype.call;t.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(t,e,n){var i=n(9781),o=n(2597),r=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=o(r,"name"),l=s&&"something"===function(){}.name,c=s&&(!i||i&&a(r,"name").configurable);t.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},1702:function(t,e,n){var i=n(4374),o=Function.prototype,r=o.bind,a=o.call,s=i&&r.bind(a,a);t.exports=i?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},5005:function(t,e,n){var i=n(7854),o=n(614),r=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(i[t]):i[t]&&i[t][e]}},8173:function(t,e,n){var i=n(9662);t.exports=function(t,e){var n=t[e];return null==n?void 0:i(n)}},7854:function(t,e,n){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var i=n(1702),o=n(7908),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(o(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var i=n(5005);t.exports=i("document","documentElement")},4664:function(t,e,n){var i=n(9781),o=n(7293),r=n(317);t.exports=!i&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var i=n(1702),o=n(7293),r=n(4326),a=Object,s=i("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?s(t,""):a(t)}:a},2788:function(t,e,n){var i=n(1702),o=n(614),r=n(5465),a=i(Function.toString);o(r.inspectSource)||(r.inspectSource=function(t){return a(t)}),t.exports=r.inspectSource},9909:function(t,e,n){var i,o,r,a=n(8536),s=n(7854),l=n(1702),c=n(111),d=n(8880),u=n(2597),p=n(5465),f=n(6200),m=n(3501),h="Object already initialized",b=s.TypeError,g=s.WeakMap,v=function(t){return r(t)?o(t):i(t,{})},y=function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw b("Incompatible receiver, "+t+" required");return n}};if(a||p.state){var w=p.state||(p.state=new g),_=l(w.get),x=l(w.has),k=l(w.set);i=function(t,e){if(x(w,t))throw new b(h);return e.facade=t,k(w,t,e),e},o=function(t){return _(w,t)||{}},r=function(t){return x(w,t)}}else{var P=f("state");m[P]=!0,i=function(t,e){if(u(t,P))throw new b(h);return e.facade=t,d(t,P,e),e},o=function(t){return u(t,P)?t[P]:{}},r=function(t){return u(t,P)}}t.exports={set:i,get:o,has:r,enforce:v,getterFor:y}},614:function(t){t.exports=function(t){return"function"==typeof t}},4705:function(t,e,n){var i=n(7293),o=n(614),r=/#|\.prototype\./,a=function(t,e){var n=l[s(t)];return n==d||n!=c&&(o(e)?i(e):!!e)},s=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",d=a.POLYFILL="P";t.exports=a},111:function(t,e,n){var i=n(614);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var i=n(5005),o=n(614),r=n(7976),a=n(3307),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return o(e)&&r(e.prototype,s(t))}},6244:function(t,e,n){var i=n(7466);t.exports=function(t){return i(t.length)}},6339:function(t,e,n){var i=n(7293),o=n(614),r=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,l=n(2788),c=n(9909),d=c.enforce,u=c.get,p=Object.defineProperty,f=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),m=String(String).split("String"),h=t.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!r(t,"name")||s&&t.name!==e)&&p(t,"name",{value:e,configurable:!0}),f&&n&&r(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(o){}var i=d(t);return r(i,"source")||(i.source=m.join("string"==typeof e?e:"")),t};Function.prototype.toString=h((function(){return o(this)&&u(this).source||l(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},133:function(t,e,n){var i=n(7392),o=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},8536:function(t,e,n){var i=n(7854),o=n(614),r=n(2788),a=i.WeakMap;t.exports=o(a)&&/native code/.test(r(a))},30:function(t,e,n){var i,o=n(9670),r=n(6048),a=n(748),s=n(3501),l=n(490),c=n(317),d=n(6200),u=">",p="<",f="prototype",m="script",h=d("IE_PROTO"),b=function(){},g=function(t){return p+m+u+t+p+"/"+m+u},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){var t,e=c("iframe"),n="java"+m+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},w=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&i?v(i):y():v(i);var t=a.length;while(t--)delete w[f][a[t]];return w()};s[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(b[f]=o(t),n=new b,b[f]=null,n[h]=t):n=w(),void 0===e?n:r.f(n,e)}},6048:function(t,e,n){var i=n(9781),o=n(3353),r=n(3070),a=n(9670),s=n(5656),l=n(1956);e.f=i&&!o?Object.defineProperties:function(t,e){a(t);var n,i=s(e),o=l(e),c=o.length,d=0;while(c>d)r.f(t,n=o[d++],i[n]);return t}},3070:function(t,e,n){var i=n(9781),o=n(4664),r=n(3353),a=n(9670),s=n(4948),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",p="configurable",f="writable";e.f=i?r?function(t,e,n){if(a(t),e=s(e),a(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=d(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:p in n?n[p]:i[p],enumerable:u in n?n[u]:i[u],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(a(t),e=s(e),a(n),o)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var i=n(9781),o=n(6916),r=n(5296),a=n(9114),s=n(5656),l=n(4948),c=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=s(t),e=l(e),d)try{return u(t,e)}catch(n){}if(c(t,e))return a(!o(r.f,t,e),t[e])}},8006:function(t,e,n){var i=n(6324),o=n(748),r=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},7976:function(t,e,n){var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:function(t,e,n){var i=n(1702),o=n(2597),r=n(5656),a=n(1318).indexOf,s=n(3501),l=i([].push);t.exports=function(t,e){var n,i=r(t),c=0,d=[];for(n in i)!o(s,n)&&o(i,n)&&l(d,n);while(e.length>c)o(i,n=e[c++])&&(~a(d,n)||l(d,n));return d}},1956:function(t,e,n){var i=n(6324),o=n(748);t.exports=Object.keys||function(t){return i(t,o)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},2140:function(t,e,n){var i=n(6916),o=n(614),r=n(111),a=TypeError;t.exports=function(t,e){var n,s;if("string"===e&&o(n=t.toString)&&!r(s=i(n,t)))return s;if(o(n=t.valueOf)&&!r(s=i(n,t)))return s;if("string"!==e&&o(n=t.toString)&&!r(s=i(n,t)))return s;throw a("Can't convert object to primitive value")}},3887:function(t,e,n){var i=n(5005),o=n(1702),r=n(8006),a=n(5181),s=n(9670),l=o([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=a.f;return n?l(e,n(t)):e}},4488:function(t){var e=TypeError;t.exports=function(t){if(void 0==t)throw e("Can't call method on "+t);return t}},6200:function(t,e,n){var i=n(2309),o=n(9711),r=i("keys");t.exports=function(t){return r[t]||(r[t]=o(t))}},5465:function(t,e,n){var i=n(7854),o=n(3072),r="__core-js_shared__",a=i[r]||o(r,{});t.exports=a},2309:function(t,e,n){var i=n(1913),o=n(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.8",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.8/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(t,e,n){var i=n(9303),o=Math.max,r=Math.min;t.exports=function(t,e){var n=i(t);return n<0?o(n+e,0):r(n,e)}},5656:function(t,e,n){var i=n(8361),o=n(4488);t.exports=function(t){return i(o(t))}},9303:function(t,e,n){var i=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},7466:function(t,e,n){var i=n(9303),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},7908:function(t,e,n){var i=n(4488),o=Object;t.exports=function(t){return o(i(t))}},7593:function(t,e,n){var i=n(6916),o=n(111),r=n(2190),a=n(8173),s=n(2140),l=n(5112),c=TypeError,d=l("toPrimitive");t.exports=function(t,e){if(!o(t)||r(t))return t;var n,l=a(t,d);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!o(n)||r(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,n){var i=n(7593),o=n(2190);t.exports=function(t){var e=i(t,"string");return o(e)?e:e+""}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var i=n(1702),o=0,r=Math.random(),a=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+r,36)}},3307:function(t,e,n){var i=n(133);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var i=n(9781),o=n(7293);t.exports=i&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:function(t,e,n){var i=n(7854),o=n(2309),r=n(2597),a=n(9711),s=n(133),l=n(3307),c=o("wks"),d=i.Symbol,u=d&&d["for"],p=l?d:d&&d.withoutSetter||a;t.exports=function(t){if(!r(c,t)||!s&&"string"!=typeof c[t]){var e="Symbol."+t;s&&r(d,t)?c[t]=d[t]:c[t]=l&&u?u(e):p(e)}return c[t]}},6699:function(t,e,n){"use strict";var i=n(2109),o=n(1318).includes,r=n(7293),a=n(1223),s=r((function(){return!Array(1).includes()}));i({target:"Array",proto:!0,forced:s},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},9946:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var i=n(6252),o=n(3577);const r={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},a={class:"modal-dialog"},s={class:"modal-content"},l={class:"modal-header bg-danger"},c={class:"modal-title text-white",id:"staticBackdropLabel"},d=(0,i._)("input",{type:"button",value:"✕",class:"bg-transparent border-0 text-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},p={class:"modal-footer"},f=(0,i._)("button",{type:"button",class:"btn btn-outline-primary","data-bs-dismiss":"modal"},"取消",-1);function m(t,e,n,m,h,b){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",a,[(0,i._)("div",s,[(0,i._)("div",l,[(0,i._)("h5",c,"刪除"+(0,o.zw)(n.item.title),1),d]),(0,i._)("div",u," 確認要刪除"+(0,o.zw)(n.item.title)+"嗎？ ",1),(0,i._)("div",p,[f,(0,i._)("button",{type:"button",class:"btn btn-danger text-white",onClick:e[0]||(e[0]=e=>t.$emit("delete-item"))},"確認")])])])],512)}var h=n(7995),b={props:{item:{}},emits:["delete-item"],data(){return{modal:{}}},mixins:[h.Z]},g=n(3744);const v=(0,g.Z)(b,[["render",m]]);var y=v},2816:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var i=n(6252),o=n(3577),r=n(9963);const a={class:"pagination justify-content-center"},s=(0,i._)("span",{"aria-hidden":"true"},"⇠",-1),l=[s],c=["onClick"],d=(0,i._)("span",{"aria-hidden":"true"},"⇢",-1),u=[d];function p(t,e,n,s,d,p){return(0,i.wg)(),(0,i.iD)("ul",a,[(0,i._)("li",{class:(0,o.C_)(["page-item fs-3",{"d-none":!n.pages.has_pre}])},[(0,i._)("a",{class:"pages-next-link",href:"#",onClick:e[0]||(e[0]=(0,r.iM)((t=>p.updatedPage(n.pages.current_page-1)),["prevent"]))},l)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,o.C_)(["page-item fs-3",{active:n.pages.current_page===t}]),key:t},[(0,i._)("a",{class:"pages-link",href:"#",onClick:(0,r.iM)((e=>p.updatedPage(t)),["prevent"])},(0,o.zw)(t),9,c)],2)))),128)),(0,i._)("li",{class:(0,o.C_)(["page-item fs-3",{"d-none":!n.pages.has_next}])},[(0,i._)("a",{class:"pages-next-link",href:"#",onClick:e[1]||(e[1]=(0,r.iM)((t=>p.updatedPage(n.pages.current_page+1)),["prevent"]))},u)],2)])}var f={props:["pages"],methods:{updatedPage(t){this.$emit("change-page",t)}}},m=n(3744);const h=(0,m.Z)(f,[["render",p]]);var b=h},4110:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Ue}});var i=n(6252),o=n(3577),r=n(9963);const a={class:"products-view d-none d-md-block table mt-4"},s=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"圖片"),(0,i._)("th",null,"分類"),(0,i._)("th",null,"名稱"),(0,i._)("th",null,"原價"),(0,i._)("th",null,"售價"),(0,i._)("th",{class:"text-center"},"啟用"),(0,i._)("th")])],-1),l={style:{width:"10%"}},c=["src"],d={class:"text-center"},u={key:0,class:"text-success"},p={key:1,class:"text-danger"},f={class:"text-end"},m={class:"btn-group"},h=["onClick"],b=["onClick"],g={class:"position-relative"},v=["src","alt"],y={class:"position-absolute top-5 start-0 d-flex justify-content-between align-items-center w-100"},w={class:"bg-secondary px-4 py-2 text-primary"},_={key:0,class:"text-success fs-1 pe-3 bi bi-check2-circle"},x={key:1,class:"text-danger fs-1 pe-3 bi bi-x-circle"},k={class:"card-body px-0 pb-0"},P={class:"card-title d-flex justify-content-between px-3"},C={key:0},D={class:"card-text px-3"},M={key:0},O={class:"border-top border-1"},j=["onClick"],T=["onClick"],U=(0,i._)("i",{class:"bi bi-plus-circle"},null,-1),S=[U];function $(t,e,n,U,$,z){const A=(0,i.up)("LoadingView"),E=(0,i.up)("product-modal"),V=(0,i.up)("delete-modal"),F=(0,i.up)("pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(A,{active:$.isLoading},null,8,["active"]),(0,i._)("table",a,[s,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.products,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",l,[(0,i._)("img",{src:e.imageUrl,alt:"",class:"img-fluid"},null,8,c)]),(0,i._)("td",null,(0,o.zw)(e.category),1),(0,i._)("td",null,(0,o.zw)(e.title),1),(0,i._)("td",null,"NT$ "+(0,o.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("td",null,"NT$ "+(0,o.zw)(t.$filters.currency(e.price)),1),(0,i._)("td",d,[e.is_enabled?((0,i.wg)(),(0,i.iD)("span",u,"YES")):((0,i.wg)(),(0,i.iD)("span",p,"NO"))]),(0,i._)("td",f,[(0,i._)("div",m,[(0,i._)("i",{class:"bi bi-pencil pointer me-1 me-md-4",onClick:t=>z.openModal("edit",e)},null,8,h),(0,i._)("i",{class:"bi bi-trash pointer",onClick:t=>z.openModal("delete",e)},null,8,b)])])])))),128))])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.products,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"card mb-4 d-md-none",key:e.id},[(0,i._)("div",g,[(0,i._)("img",{src:e.imageUrl,class:"card-img-top",alt:e.id},null,8,v),(0,i._)("div",y,[(0,i._)("span",w,(0,o.zw)(e.category),1),e.is_enabled?((0,i.wg)(),(0,i.iD)("span",_)):((0,i.wg)(),(0,i.iD)("span",x))])]),(0,i._)("div",k,[(0,i._)("h5",P,[(0,i.Uk)((0,o.zw)(e.title)+" ",1),e.origin_price===e.price?((0,i.wg)(),(0,i.iD)("span",C," NT$ "+(0,o.zw)(t.$filters.currency(e.price)),1)):(0,i.kq)("",!0)]),(0,i._)("p",D,[e.origin_price!=e.price?((0,i.wg)(),(0,i.iD)("span",M,[(0,i._)("span",null," 原價：NT$ "+(0,o.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("span",null," 售價：NT$ "+(0,o.zw)(t.$filters.currency(e.price)),1)])):(0,i.kq)("",!0)]),(0,i._)("div",O,[(0,i._)("button",{class:"product-phoneSize-edit-btn col-6 border-0 border-end py-2 text-success",onClick:t=>z.openModal("edit",e)}," 編輯 ",8,j),(0,i._)("button",{class:"product-phoneSize-edit-btn col-6 border-0 py-2 text-danger",onClick:t=>z.openModal("delete",e)}," 刪除 ",8,T)])])])))),128)),(0,i._)("button",{class:"icon-btn position-fixed bottom-15 end-5","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"新增",ref:"tooltip",onClick:e[0]||(e[0]=(0,r.iM)((t=>z.openModal("add")),["prevent"]))},S,512),(0,i.Wm)(E,{ref:"showProductModal",product:$.tempProduct,onAddProduct:z.updateProduct},null,8,["product","onAddProduct"]),(0,i.Wm)(V,{ref:"showDeleteModal",item:$.tempProduct,onDeleteItem:z.deleteProduct},null,8,["item","onDeleteItem"]),$.pagination.total_pages>1?((0,i.wg)(),(0,i.j4)(F,{key:0,pages:$.pagination,onChangePage:z.getProducts},null,8,["pages","onChangePage"])):(0,i.kq)("",!0)],64)}const z={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},A={class:"modal-dialog modal-xl",role:"document"},E={class:"modal-content border-0"},V=(0,i._)("div",{class:"modal-header bg-primary text-white"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,i._)("span",null,"產品")]),(0,i._)("input",{type:"button",value:"✕",class:"bg-transparent border-0 text-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body"},N={class:"col-12 col-lg-6 position-relative"},L={class:"row gx-2"},W={class:"mb-3 col-12 col-lg-6"},I=(0,i._)("label",{for:"title",class:"form-label"},[(0,i.Uk)("名稱"),(0,i._)("span",{class:"text-danger"},"*")],-1),q={class:"mb-3 col-6 col-lg-3"},Y=(0,i._)("label",{for:"category",class:"form-label"},[(0,i.Uk)("分類"),(0,i._)("span",{class:"text-danger"},"*")],-1),Z=(0,i._)("option",{value:"請選擇",disabled:""},"請選擇",-1),H=["value"],K={class:"mb-3 col-6 col-lg-3"},B=(0,i._)("label",{class:"form-label opacity-0"},"新增分類",-1),R={class:"d-flex justify-content-between mt-3"},G={class:"row align-items-center"},X={class:"mb-3 col-6"},J=(0,i._)("label",{for:"unit",class:"form-label"},[(0,i.Uk)("單位"),(0,i._)("span",{class:"text-danger"},"*")],-1),Q={class:"mb-3 col-6"},tt={for:"is_enabled",class:"form-label"},et=(0,i.Uk)("上架 "),nt={key:0},it={key:1},ot={class:"row"},rt={class:"mb-3 col-6"},at=(0,i._)("label",{for:"origin_price",class:"form-label"},[(0,i.Uk)("原價"),(0,i._)("span",{class:"text-danger"},"*")],-1),st={class:"mb-3 col-6"},lt=(0,i._)("label",{for:"price",class:"form-label"},[(0,i.Uk)("售價"),(0,i._)("span",{class:"text-danger"},"*")],-1),ct=(0,i._)("hr",null,null,-1),dt={class:"mb-3"},ut=(0,i._)("label",{for:"content",class:"form-label"},"說明",-1),pt={class:"mb-3"},ft={class:"mb-3"},mt=(0,i._)("label",{class:"form-label"},"描述",-1),ht={class:"row border rounded-2 g-0",style:{padding:"1rem 0.75rem"}},bt={class:"col-6"},gt={class:"list-unstyled m-0"},vt={class:"col-6 text-end align-self-end"},yt={class:"col-12 col-lg-6"},wt={class:"row"},_t=(0,i._)("span",{class:"form-label"},[(0,i.Uk)("上傳主要圖片"),(0,i._)("small",null,"( 網址／檔案 )")],-1),xt={class:"col-8"},kt={class:"row"},Pt={class:"col-12 mb-3"},Ct={class:"col-12 mb-3"},Dt={class:"col-4 text-end"},Mt={key:0,class:"border",style:{height:"92px"}},Ot=(0,i._)("p",{class:"text-center",style:{"line-height":"92px"}},[(0,i._)("i",{class:"bi bi-image"})],-1),jt=[Ot],Tt=["src"],Ut={class:"row"},St={class:"d-flex justify-content-between align-items-center mb-3"},$t=(0,i._)("span",null,[(0,i.Uk)("上傳次要圖片"),(0,i._)("small",null,"( 網址／檔案 )")],-1),zt={class:"d-flex justify-content-between align-items-center"},At={class:"mb-0"},Et=["onClick"],Vt=["id","onUpdate:modelValue"],Ft=["for"],Nt=["id","onChange"],Lt={key:0,class:"border rounded-3",style:{height:"172.45px"}},Wt=(0,i._)("p",{class:"text-center",style:{"line-height":"172.45px"}},[(0,i._)("i",{class:"bi bi-cloud fs-4"})],-1),It=[Wt],qt=["src"],Yt={class:"modal-footer"},Zt=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Ht(t,e,n,a,s,l){const c=(0,i.up)("v-field"),d=(0,i.up)("error-message"),u=(0,i.up)("v-form"),p=(0,i.up)("description-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",z,[(0,i._)("div",A,[(0,i._)("div",E,[V,(0,i._)("div",F,[(0,i.Wm)(u,{class:"row"},{default:(0,i.w5)((({errors:t})=>[(0,i._)("div",N,[(0,i._)("div",L,[(0,i._)("div",W,[I,(0,i.Wm)(c,{type:"text",class:(0,o.C_)(["form-control",{"is-invalid":t["產品名稱"]}]),id:"title",placeholder:"請輸入產品名稱",name:"產品名稱",rules:"required",modelValue:s.tempProduct.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.tempProduct.title=t)},null,8,["class","modelValue"]),(0,i.Wm)(d,{name:"產品名稱",class:"invalid-feedback"})]),(0,i._)("div",q,[Y,(0,i.Wm)(c,{as:"select",class:(0,o.C_)(["form-control",{"is-invalid":t["產品分類"]}]),id:"category",modelValue:s.tempProduct.category,"onUpdate:modelValue":e[1]||(e[1]=t=>s.tempProduct.category=t),onClick:e[2]||(e[2]=(0,r.iM)((t=>s.addCategory=!1),["prevent"])),name:"產品分類",rules:"required"},{default:(0,i.w5)((()=>[Z,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.category,(t=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,o.zw)(t),9,H)))),128))])),_:2},1032,["modelValue","class"]),(0,i.Wm)(d,{name:"產品分類",class:"invalid-feedback"})]),(0,i._)("div",K,[B,(0,i._)("button",{type:"button",class:"btn btn-primary w-100",onClick:e[3]||(e[3]=(0,r.iM)((t=>l.showAdd(!0)),["prevent"]))},"新增分類")])]),(0,i._)("div",{class:(0,o.C_)(["add-category box-shadow",{opacity1:s.addCategory,"top-13":s.addCategory}])},[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:"請輸入分類名稱","onUpdate:modelValue":e[4]||(e[4]=t=>s.newCategory=t)},null,512),[[r.nr,s.newCategory]]),(0,i._)("div",R,[(0,i._)("button",{class:"btn btn-outline-secondary px-4",onClick:e[5]||(e[5]=t=>l.showAdd(!1))},"取消"),(0,i._)("button",{class:"btn btn-primary px-4",onClick:e[6]||(e[6]=(0,r.iM)(((...t)=>l.addNew&&l.addNew(...t)),["prevent"]))},"新增")])],2),(0,i._)("div",G,[(0,i._)("div",X,[J,(0,i.Wm)(c,{type:"text",class:(0,o.C_)(["form-control",{"is-invalid":t["產品單位"]}]),id:"unit",placeholder:"請輸入單位",modelValue:s.tempProduct.unit,"onUpdate:modelValue":e[7]||(e[7]=t=>s.tempProduct.unit=t),name:"產品單位",rules:"required"},null,8,["modelValue","class"]),(0,i.Wm)(d,{name:"產品單位",class:"invalid-feedback"})]),(0,i._)("div",Q,[(0,i._)("label",tt,[et,s.tempProduct.is_enabled?((0,i.wg)(),(0,i.iD)("span",nt,"(是)")):((0,i.wg)(),(0,i.iD)("span",it,"(否)"))]),(0,i._)("div",null,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":e[8]||(e[8]=t=>s.tempProduct.is_enabled=t)},null,512),[[r.e8,s.tempProduct.is_enabled]])])])]),(0,i._)("div",ot,[(0,i._)("div",rt,[at,(0,i.Wm)(c,{type:"number",class:(0,o.C_)(["form-control",{"is-invalid":t["產品原價"]}]),id:"origin_price",placeholder:"請輸入原價",modelValue:s.tempProduct.origin_price,"onUpdate:modelValue":e[9]||(e[9]=t=>s.tempProduct.origin_price=t),name:"產品原價",rules:"required"},null,8,["modelValue","class"]),(0,i.Wm)(d,{name:"產品原價",class:"invalid-feedback"})]),(0,i._)("div",st,[lt,(0,i.Wm)(c,{type:"number",class:(0,o.C_)(["form-control",{"is-invalid":t["產品售價"]}]),id:"price",placeholder:"請輸入售價",modelValue:s.tempProduct.price,"onUpdate:modelValue":e[10]||(e[10]=t=>s.tempProduct.price=t),name:"產品售價",rules:"required"},null,8,["modelValue","class"]),(0,i.Wm)(d,{name:"產品售價",class:"invalid-feedback"})])]),ct,(0,i._)("div",dt,[ut,(0,i.wy)((0,i._)("textarea",{class:"form-control",id:"content",placeholder:"請輸入產品說明內容",rows:"5","onUpdate:modelValue":e[11]||(e[11]=t=>s.tempProduct.content=t)},null,512),[[r.nr,s.tempProduct.content]])]),(0,i._)("div",pt,[(0,i._)("input",{type:"button",class:(0,o.C_)(["btn btn-primary pointer",{"d-none":s.referenceUrl}]),value:"加入參考連結",onClick:e[12]||(e[12]=(0,r.iM)((t=>s.referenceUrl=!0),["prevent"]))},null,2),(0,i.wy)((0,i._)("input",{type:"text",class:(0,o.C_)(["form-control w-100",{"d-none":!s.referenceUrl}]),placeholder:"請輸入參考連結","onUpdate:modelValue":e[13]||(e[13]=t=>s.tempProduct.referenceUrl=t)},null,2),[[r.nr,s.tempProduct.referenceUrl]])]),(0,i._)("div",ft,[s.newDescription?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[mt,(0,i._)("div",ht,[(0,i._)("div",bt,[(0,i._)("ul",gt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.tempProduct.description,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t},(0,o.zw)(t.title)+"："+(0,o.zw)(t.content),1)))),128))])]),(0,i._)("div",vt,[(0,i._)("button",{class:"btn btn-primary pointer",onClick:e[14]||(e[14]=t=>l.openDescription(!1,s.tempProduct.description))},"編輯產品描述")])])],64)),s.newDescription?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn btn-primary pointer",onClick:e[15]||(e[15]=t=>l.openDescription(!0))},"新增產品描述")):(0,i.kq)("",!0)])]),(0,i._)("div",yt,[(0,i._)("div",wt,[_t,(0,i._)("div",xt,[(0,i._)("div",kt,[(0,i._)("div",Pt,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"imageMailUrl",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[16]||(e[16]=t=>s.tempProduct.imageUrl=t)},null,512),[[r.nr,s.tempProduct.imageUrl]])]),(0,i._)("div",Ct,[(0,i._)("input",{type:"file",id:"imageMailFile",class:"form-control",onChange:e[17]||(e[17]=t=>l.uploadFile("main",t))},null,32)])])]),(0,i._)("div",Dt,[""===s.tempProduct.imageUrl?((0,i.wg)(),(0,i.iD)("div",Mt,jt)):(0,i.kq)("",!0),(0,i._)("img",{class:"files img-fluid",src:s.tempProduct.imageUrl},null,8,Tt)])]),(0,i._)("div",Ut,[(0,i._)("div",St,[$t,(0,i._)("input",{type:"button",class:"btn btn-primary",value:"新增",onClick:e[18]||(e[18]=t=>l.addImages(s.tempProduct.images.length))})]),s.tempProduct.images?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(s.tempProduct.images,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-6 mb-3",key:e},[(0,i._)("div",zt,[(0,i._)("p",At,"次要圖片 "+(0,o.zw)(e+1),1),(0,i._)("i",{class:"bi bi-trash pointer",onClick:t=>s.tempProduct.images.splice(e,1)},null,8,Et)]),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control mb-3",id:`imagesUrl${e}`,placeholder:"請輸入圖片連結","onUpdate:modelValue":t=>s.tempProduct.images[e]=t},null,8,Vt),[[r.nr,s.tempProduct.images[e]]]),(0,i._)("label",{for:`imagesFile${e}`,class:"images-label w-100 pointer"},[(0,i._)("input",{type:"file",id:`imagesFile${e}`,class:"d-none",onChange:t=>l.uploadFile(e,t)},null,40,Nt),""===s.tempProduct.images[e]?((0,i.wg)(),(0,i.iD)("div",Lt,It)):(0,i.kq)("",!0),(0,i._)("img",{class:"img-fluid",style:{height:"172.45px"},src:t},null,8,qt)],8,Ft)])))),128)):(0,i.kq)("",!0)])])])),_:1})]),(0,i._)("div",Yt,[Zt,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[19]||(e[19]=(...t)=>l.addProduct&&l.addProduct(...t))},"確認")])])])],512),(0,i.Wm)(p,{describe:s.tempProduct.description,onAddDescription:l.updateDescription,ref:"descriptionModal"},null,8,["describe","onAddDescription"])],64)}n(6699);var Kt=n(7995);const Bt={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal",style:{"z-index":"1062"}},Rt={class:"modal-dialog"},Gt={class:"modal-content"},Xt={class:"modal-header bg-secondary"},Jt=(0,i._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"產品描述",-1),Qt={class:"modal-body"},te={class:"row"},ee={class:"col-12 mb-3"},ne=(0,i._)("label",{for:"description",class:"form-label"},"標題",-1),ie={class:"row justify-content-between"},oe={class:"col-6"},re=["disabled"],ae=(0,i._)("option",{value:"請選擇",disabled:""},"請選擇",-1),se=["value"],le={class:"col-6"},ce=["disabled"],de={class:"d-flex align-items-center"},ue={class:"col-12 mb-3"},pe=(0,i._)("label",{for:"description",class:"form-label"},"內容",-1),fe={class:"list-unstyled"},me={class:"w-85 mb-1"},he=["onClick"],be=["onClick"],ge={class:"modal-footer"};function ve(t,e,n,a,s,l){return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(["descriptionModal",{"d-none":s.hideDescriptionModal}])},[(0,i._)("div",Bt,[(0,i._)("div",Rt,[(0,i._)("div",Gt,[(0,i._)("div",Xt,[Jt,(0,i._)("input",{type:"button",value:"✕",class:"bg-transparent border-0","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>l.hideModal&&l.hideModal(...t))})]),(0,i._)("div",Qt,[(0,i._)("div",te,[(0,i._)("div",ee,[ne,(0,i._)("div",ie,[(0,i._)("div",oe,[(0,i.wy)((0,i._)("select",{class:"form-control",id:"description",disabled:!s.isAdd,"onUpdate:modelValue":e[1]||(e[1]=t=>s.newTitle=t),onClick:e[2]||(e[2]=t=>s.addTitle=!0)},[ae,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.descriptionTitle,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:t},(0,o.zw)(t),9,se)))),128))],8,re),[[r.bM,s.newTitle]])]),(0,i._)("div",le,[(0,i._)("input",{type:"button",class:(0,o.C_)(["btn btn-secondary w-100",{"d-none":!s.addTitle}]),value:"新增標題",disabled:!s.isAdd,onClick:e[3]||(e[3]=(0,r.iM)((t=>l.showAdd(!0)),["prevent"]))},null,10,ce),(0,i._)("div",de,[(0,i.wy)((0,i._)("input",{type:"text",class:(0,o.C_)(["form-control w-80",{"d-none":s.addTitle}]),placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=t=>s.newTitle=t)},null,2),[[r.nr,s.newTitle]]),(0,i._)("i",{class:(0,o.C_)(["bi bi-patch-check pointer ms-2 fs-3",{"d-none":s.addTitle}]),onClick:e[5]||(e[5]=(0,r.iM)(((...t)=>l.addNewTitle&&l.addNewTitle(...t)),["prevent"]))},null,2)])])])]),(0,i._)("div",ue,[pe,s.isAdd?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,type:"text",class:"form-control",placeholder:"請輸入產品描述內容","onUpdate:modelValue":e[6]||(e[6]=t=>s.newContent=t),onKeyup:e[7]||(e[7]=(0,r.D2)((t=>l.addDescription(!0)),["enter"]))},null,544)),[[r.nr,s.newContent]]):(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:1,type:"text",class:"form-control",placeholder:"請輸入產品描述內容","onUpdate:modelValue":e[8]||(e[8]=t=>s.newContent=t),onKeyup:e[9]||(e[9]=(0,r.D2)((t=>l.addDescription(!1)),["enter"]))},null,544)),[[r.nr,s.newContent]])])]),s.isAdd?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-secondary w-100 mb-3",onClick:e[10]||(e[10]=(...t)=>l.addDescription&&l.addDescription(...t))},"新增產品描述")):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn btn-secondary w-100 mb-3",onClick:e[11]||(e[11]=t=>l.addDescription(!1,"sendEdit"))},"修改產品描述")),(0,i._)("ul",fe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.description,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{class:"d-flex justify-content-between",key:t},[(0,i._)("p",me,(0,o.zw)(t.title)+"："+(0,o.zw)(t.content),1),(0,i._)("div",null,[(0,i._)("i",{class:"bi bi-pencil pointer me-3",onClick:t=>l.addDescription(!1,"edit",e)},null,8,he),(0,i._)("i",{class:"bi bi-trash pointer",onClick:t=>l.deleteDescription(e)},null,8,be)])])))),128))])]),(0,i._)("div",ge,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:e[12]||(e[12]=(...t)=>l.hideModal&&l.hideModal(...t))},"取消"),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[13]||(e[13]=(...t)=>l.addFinal&&l.addFinal(...t))},"確認")])])])],512)],2)}var ye={props:{describe:{type:Array,default(){return[]}}},emits:["add-description"],inject:["emitter"],mixins:[Kt.Z],data(){return{modal:{},description:[],hideDescriptionModal:!0,descriptionTitle:["國家","處理法","烘焙程度","風味","重量(g)","尺寸(mm)","材質","容量(ml)"],isAdd:!0,alreadyHaveTitle:!1,addTitle:!0,newTitle:"",newContent:""}},watch:{describe(){this.description=this.describe},newTitle(){""!==this.newTitle&&this.description.forEach((t=>{t.title===this.newTitle&&this.isAdd&&(alert(`該標題「${t.title}」已經選過囉！請再選其他的標題：）`),this.newTitle="")}))}},methods:{showAdd(t){this.addTitle=!t},addNewTitle(){const t=this.descriptionTitle.indexOf(this.newTitle);-1!==t?alert("已經有此分類名稱囉！"):""===this.newTitle?alert("請輸入標題！"):(this.descriptionTitle.push(this.newTitle),this.addTitle=!0),this.newTitle=""},addDescription(t,e,n){if(t)if(""!==this.newTitle&&""!==this.newContent){const t={};t.title=this.newTitle,t.content=this.newContent,this.description.push(t),this.render()}else alert("欄位不能是空白的唷！");else this.isAdd=!1,scrollTo(0,0),"edit"===e?(this.newTitle=this.description[n].title,this.newContent=this.description[n].content):(this.description.forEach((t=>{t.title===this.newTitle&&(t.content=this.newContent,this.render())})),this.isAdd=!0)},deleteDescription(t){this.description.splice(t,1)},addFinal(){0===this.description.length?this.$emit("add-description",this.description,!0):this.$emit("add-description",this.description,!1),this.description=[],this.render(),this.hideDescriptionModal=!0},hideModal(){this.render(),this.hideDescriptionModal=!0},render(){this.newTitle="",this.newContent="",this.isAdd=!0}},created(){this.emitter.on("openDescription",(t=>{this.hideDescriptionModal=t}))}},we=n(3744);const _e=(0,we.Z)(ye,[["render",ve]]);var xe=_e,ke={components:{descriptionModal:xe},props:{product:{type:Object,default(){return{}}}},emits:["add-product"],inject:["emitter"],mixins:[Kt.Z],watch:{product(){this.tempProduct=this.product,this.tempProduct.images||(this.tempProduct.images=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl=""),this.tempProduct.referenceUrl?this.referenceUrl=!0:this.referenceUrl=!1},"tempProduct.description"(){void 0===this.tempProduct.description||0===this.tempProduct.description.length?this.newDescription=!0:this.newDescription=!1}},data(){return{modal:{},tempProduct:{},category:[],addCategory:!1,newCategory:"",referenceUrl:!1,newDescription:!0}},methods:{getCategory(){const t="https://vue3-course-api.hexschool.io/api/irenelee-api/products/all";this.$http.get(t).then((t=>{t.data.products.forEach((t=>{this.category.includes(t.category)||this.category.push(t.category)}))})).catch((t=>console.log(t)))},showAdd(t){this.addCategory=!!t},addNew(){const t=this.category.indexOf(this.newCategory);-1!==t?alert("已經有此分類名稱囉！"):(this.category.push(this.newCategory),this.addCategory=!1),this.newCategory=""},openDescription(t,e){this.tempProduct.description=t?[]:[...e],this.emitter.emit("openDescription",!1),this.$refs.descriptionModal.showModal()},updateDescription(t,e){this.tempProduct.description=t,this.newDescription=e},uploadFile(t,e){this.addImages=!1;const n=e.target.files[0],i=new FormData,o="https://vue3-course-api.hexschool.io/api/irenelee-api/admin/upload";i.append("file-to-upload",n),this.$http.post(o,i).then((e=>{e.data.success&&("main"===t?this.tempProduct.imageUrl=e.data.imageUrl:this.tempProduct.images[t]=e.data.imageUrl)})).catch((t=>console.log(t.response)))},addImages(t){const e=this.tempProduct.images;console.log(e[t-1],""!==e[0]),e.length<4?""===e[t-1]||""===e[0]?alert("不要那麼貪心><!先加入照片再新增新的!!"):e.push(""):alert("次要圖片最多只能上傳四張唷！")},addProduct(){this.tempProduct.images.forEach(((t,e)=>{""===t&&this.tempProduct.images.splice(e,1)})),this.$emit("add-product",this.tempProduct)}},mounted(){this.getCategory()}};const Pe=(0,we.Z)(ke,[["render",Ht]]);var Ce=Pe,De=n(9946),Me=n(2816),Oe=n(7430),je={components:{productModal:Ce,deleteModal:De.Z,pagination:Me.Z},data(){return{products:[],pagination:{},tempProduct:{},isNewProduct:!1,isLoading:!1}},inject:["emitter"],mixins:[Oe.Z],methods:{getProducts(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/irenelee-api/admin/products?page=${t}`;this.$http.get(e).then((t=>{t.data.success&&(this.isLoading=!1,this.products=t.data.products,this.pagination=t.data.pagination,scrollTo(0,0))})).catch((t=>console.log(t.response)))},openModal(t,e){"add"===t?(this.tempProduct={},this.isNewProduct=!0,this.$refs.showProductModal.showModal()):"edit"===t?(this.tempProduct={...e},this.isNewProduct=!1,this.$refs.showProductModal.showModal()):(this.tempProduct={...e},this.$refs.showDeleteModal.showModal())},updateProduct(t){this.tempProduct=t;let e="https://vue3-course-api.hexschool.io/api/irenelee-api/admin/product",n="post";this.isNewProduct||(e=`https://vue3-course-api.hexschool.io/api/irenelee-api/admin/product/${t.id}`,n="put");const i=this.$refs.showProductModal;this.$http[n](e,{data:this.tempProduct}).then((t=>{i.hideModal(),t.data.success?(this.getProducts(),this.$message("success","更新成功")):this.$message("danger","失敗！請再試一次！")}))},deleteProduct(){const t=`https://vue3-course-api.hexschool.io/api/irenelee-api/admin/product/${this.tempProduct.id}`;this.$http.delete(t,{data:this.tempProduct}).then((t=>{t.data.success&&(this.$refs.showDeleteModal.hideModal(),this.getProducts(),this.$message("success","刪除成功"))})).catch((t=>console.log(t.response)))}},created(){this.getProducts()}};const Te=(0,we.Z)(je,[["render",$]]);var Ue=Te}}]);
//# sourceMappingURL=110.45faf932.js.map