"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[900],{5900:function(e,s,l){l.r(s),l.d(s,{default:function(){return T}});var r=l(6252),a=l(3577),t=l(9963);const o={class:"container mb-5 mb-lg-0"},i=(0,r.uE)('<ul class="list-unstyled row align-items-center justify-content-center mt-3 mb-5"><li class="col-2 cart-step finish-step"><span>step1</span></li><li class="col-2 cart-step-line"></li><li class="col-2 cart-step"><span>step2</span></li><li class="col-2 cart-step-line not-yet-step-line"></li><li class="col-2 cart-step not-yet-step"><span>step3</span></li></ul>',1),c={class:"container order-buer-info-list"},n={class:"row justify-content-center justify-content-lg-between"},d=(0,r._)("h1",{class:"fs-3 g-0"},"購買清單",-1),u={class:"order-list-outside border rounded-2 col-12 col-lg-4 mb-5"},m={class:"order-list-final pt-3 px-3 mb-0"},p={class:"col-2 h-100 p-0"},f=["src","alt"],b={class:"col-5 d-flex align-items-center"},h={class:"col-2 d-flex align-items-center"},g={class:"col-3 d-flex align-items-center justify-content-end p-0"},_={class:"d-flex justify-content-between justify-content-lg-end mt-2"},v={class:"fs-5 mb-0 me-lg-10"},w={class:"fs-5 mb-0"},y=(0,r._)("span",{class:"me-3"},"總計",-1),V={class:"col-6"},x=(0,r._)("label",{for:"userName",class:"form-label"},"收件人姓名*",-1),k={class:"col-6"},F=(0,r._)("label",{for:"userPhone",class:"form-label"},"收件人手機*",-1),W={class:"col-12"},L=(0,r._)("label",{for:"userEmail",class:"form-label"},"收件人信箱*",-1),U={class:"col-12"},$=(0,r._)("label",{for:"userAddress",class:"form-label"},"收件人地址*",-1),j={class:"col-12"},C=(0,r._)("label",{for:"userMessage",class:"form-label"},"備註",-1),z={class:"d-flex justify-content-between align-items-center mb-3"},q=(0,r.Uk)("上一步"),D=(0,r._)("button",{type:"submit",class:"btn btn-primary"},"下一步",-1);function N(e,s,l,N,O,P){const E=(0,r.up)("LoadingView"),T=(0,r.up)("v-field"),A=(0,r.up)("error-message"),H=(0,r.up)("router-link"),I=(0,r.up)("v-form");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(E,{active:O.isLoading},null,8,["active"]),(0,r._)("div",o,[i,(0,r._)("div",c,[(0,r._)("div",n,[d,(0,r._)("div",u,[(0,r._)("ul",m,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(O.orders.carts,(s=>((0,r.wg)(),(0,r.iD)("li",{class:"row pb-2 mb-2 border-bottom",key:s.id},[(0,r._)("div",p,[(0,r._)("img",{src:s.product.imageUrl,alt:s.id,class:"w-100 h-100"},null,8,f)]),(0,r._)("div",b,(0,a.zw)(s.product.title),1),(0,r._)("div",h,"x "+(0,a.zw)(s.qty),1),(0,r._)("div",g,"NT$ "+(0,a.zw)(e.$filters.currency(s.product.price)),1)])))),128))]),(0,r._)("div",_,[(0,r._)("p",v,"共 "+(0,a.zw)(O.orderLength)+" 項",1),(0,r._)("p",w,[y,(0,r.Uk)("NT$ "+(0,a.zw)(e.$filters.currency(O.orders.final_total)),1)])])]),(0,r.Wm)(I,{class:"row col-12 col-lg-7 border rounded-2 pt-3",onSubmit:P.createOrder},{default:(0,r.w5)((({errors:e})=>[(0,r._)("div",V,[x,(0,r.Wm)(T,{type:"text",class:(0,a.C_)(["form-control",{"is-invalid":e["姓名"]}]),id:"userName",name:"姓名",placeholder:"請輸入收件人姓名",rules:"required",modelValue:O.userForm.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>O.userForm.user.name=e)},null,8,["class","modelValue"]),(0,r.Wm)(A,{name:"姓名",class:"invalid-feedback"})]),(0,r._)("div",k,[F,(0,r.Wm)(T,{type:"text",class:(0,a.C_)(["form-control mb-3",{"is-invalid":e["聯絡電話"]}]),id:"userPhone",name:"聯絡電話",placeholder:"請輸入聯絡電話",rules:P.isPhone,modelValue:O.userForm.user.tel,"onUpdate:modelValue":s[1]||(s[1]=e=>O.userForm.user.tel=e)},null,8,["class","rules","modelValue"]),(0,r.Wm)(A,{name:"聯絡電話",class:"invalid-feedback"})]),(0,r._)("div",W,[L,(0,r.Wm)(T,{type:"email",class:(0,a.C_)(["form-control mb-3",{"is-invalid":e["信箱"]}]),id:"userEmail",name:"信箱",placeholder:"請輸入信箱",rules:"email|required",modelValue:O.userForm.user.email,"onUpdate:modelValue":s[2]||(s[2]=e=>O.userForm.user.email=e)},null,8,["class","modelValue"]),(0,r.Wm)(A,{name:"信箱",class:"invalid-feedback"})]),(0,r._)("div",U,[$,(0,r.Wm)(T,{type:"text",class:(0,a.C_)(["form-control mb-3",{"is-invalid":e["地址"]}]),id:"userAddress",name:"地址",placeholder:"請輸入收件人地址",rules:"required",modelValue:O.userForm.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>O.userForm.user.address=e)},null,8,["class","modelValue"]),(0,r.Wm)(A,{name:"地址",class:"invalid-feedback"})]),(0,r._)("div",j,[C,(0,r.wy)((0,r._)("textarea",{type:"email",class:"form-control mb-3",id:"userMessage",rows:"4","onUpdate:modelValue":s[4]||(s[4]=e=>O.userForm.message=e)},null,512),[[t.nr,O.userForm.message]])]),(0,r._)("div",z,[(0,r.Wm)(H,{to:"/cart",class:"btn btn-primary"},{default:(0,r.w5)((()=>[q])),_:1}),D])])),_:1},8,["onSubmit"])])])])],64)}var O={data(){return{isLoading:!1,orders:[],orderLength:0,userForm:{user:{name:"",tel:"",email:"",address:""},message:""}}},methods:{getOrders(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/irenelee-api/cart";this.$http.get(e).then((e=>{e.data.success&&(this.isLoading=!1,this.orders=e.data.data,this.orderLength=e.data.data.carts.length,window.scrollTo(0,0))})).catch((e=>console.log(e.response)))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/irenelee-api/order";this.$http.post(e,{data:this.userForm}).then((e=>{console.log(e),e.data.success&&this.$router.push({name:"step3",params:{buyerID:e.data.orderId}})})).catch((e=>console.log(e.response)))},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"請輸入正確的電話號碼"}},mounted(){this.getOrders()}},P=l(3744);const E=(0,P.Z)(O,[["render",N]]);var T=E}}]);
//# sourceMappingURL=900.95e4f82d.js.map